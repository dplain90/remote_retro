if command -v asdf >/dev/null; then
  echo -e "\nasdf version manager already available. Skipping installation!\n";
else
  echo -e "\nInstalling asdf version manager...\n"
  git clone https://github.com/asdf-vm/asdf.git ~/.asdf --branch v0.5.1;

  echo -e '\n. $HOME/.asdf/asdf.sh' >> ~/.bash_profile
  echo -e '\n. $HOME/.asdf/completions/asdf.bash' >> ~/.bash_profile
  source ~/.bash_profile
fi

if asdf plugin-list | grep erlang >/dev/null; then
  echo -e "asdf: 'erlang' plugin already available. Skipping installation!\n";
else
  echo -e "Installing asdf's erlang plugin...\n";
  asdf plugin-add erlang https://github.com/HashNuke/asdf-erlang.git;
fi

if asdf plugin-list | grep elixir >/dev/null; then
  echo -e "asdf: 'elixir' plugin already available. Skipping installation!\n";
else
  echo -e "Installing asdf's elixir plugin...\n";
  asdf plugin-add elixir https://github.com/HashNuke/asdf-elixir.git;
fi

erlang_version=$(awk '/erlang/ { print $2 }' .tool-versions) && asdf install erlang ${erlang_version}
elixir_version=$(awk '/elixir/ { print $2 }' .tool-versions) && asdf install elixir ${elixir_version}
